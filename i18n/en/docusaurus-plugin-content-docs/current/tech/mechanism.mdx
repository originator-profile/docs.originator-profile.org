---
sidebar_position: 2
---

# Originator Profile の仕組み

## Originator Profile を構成する VCs

[Originator Profile とは](./about.mdx)で取り上げたように、Originator Profile (OP), Content Attestation (CA) は Verifiable Credentials (VCs) を基盤としたデータモデルを採用しています。

Originator Profile で扱う VCs は、次の表に示すいくつかの VC に定義されます。

| 名称                                                                   | 用途                                                          | 内容                                                | 発行主体                                                       | 配布形式                                                                         |
| :--------------------------------------------------------------------- | :------------------------------------------------------------ | :-------------------------------------------------- | :------------------------------------------------------------- | :------------------------------------------------------------------------------- |
| [Core Profile (CP)](/opb/terminology.md#core-profile-cp)               | OP 保有組織の真正性担保                                       | OP 保有組織の公開鍵                                 | [OP レジストリ](/opb/terminology.md#op-レジストリ) (OP 発行者) | [Originator Profile Set (OPS)](/opb/terminology.md#originator-profile-set-ops)   |
| [Web Media Profile (WMP)](/opb/terminology.md#web-media-profile-wmp)   | Web 利用者のための OP 保有組織の表示情報                      | Web メディア名など                                  | [OP レジストリ](/opb/terminology.md#op-レジストリ) (OP 発行者) | [Originator Profile Set (OPS)](/opb/terminology.md#originator-profile-set-ops)   |
| [Profile Annotation (PA)](/opb/terminology.md#profile-annotation-pa)   | OP 保有組織に対する付加情報                                   | OP 保有組織の組織実在性、業界団体所属、認証取得など | 発信者の適格性を判断する組織 (PA 発行者)                       | [Originator Profile Set (OPS)](/opb/terminology.md#originator-profile-set-ops)   |
| [Website Profile (WSP)](/opb/terminology.md#website-profile-wsp)       | OP 保有組織が運営する Web サイトであることの表明              | Web サイト名など                                    | 発信者                                                         | [Site Profile (SP)](/opb/terminology.md#site-profile-sp)                         |
| [Content Attestation (CA)](/opb/terminology.md#content-attestation-ca) | [Web コンテンツ](/opb/terminology.md#web-content)の真正性担保 | コンテンツデータのハッシュなど                      | 発信者                                                         | [Content Attestation Set (CAS)](/opb/terminology.md#content-attestation-set-cas) |

これらの VCs には発行主体によるデジタル署名が施されるため、内容の改ざんがされていないことを確認できます。また、IHV モデルの利点から、Web 利用者がこれらの VCs を検証する際には、検証のための Web サーバーへのアクセスが不要で、プライバシーの懸念がないことも特徴です。

表には Originator Profile (OP) という名称の VC が記載されていませんが、OP は単体の VC ではなく、CP、WMP、PA から構成されるデータ形式です。これにより、VC の単位で適切な発行主体による発行や、利用ケースに応じた VC の差し替えといった柔軟性が得られます。

## 関係図

次の図は、Originator Profile を構成する VCs の発行主体と、Web 利用者の間でどのようなやりとりがおこなわれるかの関係を示しています。

![OP の仕組み](./assets/op-ihv_en.png)

発信者は OP 発行者と PA 発行者に、VCs の発行に必要な情報を提供します。OP 発行者と PA 発行者は情報に基づいてそれぞれ OP と PA を発行します。

OP と PA を受け取った発信者は、自身が発信する Web コンテンツに基づいて CA と WSP を発行します。また、それぞれの VC を適切な配布形式の CAS、OPS、OPS に格納して、Web コンテンツとともに Web に配信します。

Web 利用者は、Web を閲覧する際に VCs を取得し、発信者とコンテンツの真正性・信頼性を確認することができます。

## Web での利用

発信者が Originator Profile で扱う VCs を Web コンテンツとともに Web 上で配信するためには、[OPS](/opb/terminology.md#originator-profile-set-ops) と [CAS](/opb/terminology.md#content-attestation-set-cas) の [HTML への紐付け](/opb/link-to-html.md)と、[SP](/opb/terminology.md#site-profile-sp) の形式にしたがう必要があります。これにより、Web 利用者は専用の拡張機能を利用して Web コンテンツに紐づく VCs を確認することができます。

import PopUpDp from "./assets/popup-ca_en.png";
import popUpOp from "./assets/popup-op_en.png";

<div style={{ display: "flex" }}>
  <img src={PopUpDp} width={"50%"} />
  <img src={popUpOp} width={"50%"} />
</div>

ページ内の各 Web コンテンツの位置も特定されます。

![ページ内に表示されるマーカー](./assets/markers_en.png)

VCs の検証に失敗した場合、拡張機能に検証失敗の画面が表示されます。ユーザーに安全でないサイトを閲覧している可能性があることを警告します。

import verificationFailed from "./assets/verification-failed_en.png";

<img src={verificationFailed} width={550} />
